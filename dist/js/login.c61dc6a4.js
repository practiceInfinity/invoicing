"use strict";(self["webpackChunkcashflow"]=self["webpackChunkcashflow"]||[]).push([[535],{8003:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var r=s(6190),a=s(4145),i=s(4886),o=s(266),n=s(2118),l=s(5125),d=s(9592),c=s(1713),u=s(7808),h=function(){var t=this,e=t._self._c;return e(n.Z,[e(c.Z,[e(o.Z,{attrs:{cols:"12",sm:"12",md:"8",lg:"6",xl:"6","offset-md":"2","offset-lg":"3","offset-xl":"3"}},[e(a.Z,{staticClass:"mt-4 px-4 text-center"},[e("h1",[t._v("Cashflow")]),e(i.ZB,[e(l.Z,{ref:"form",staticClass:"login-form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(u.Z,{attrs:{label:"Email",type:"email",rules:t.emailRules,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t.isValidEmail?e(u.Z,{attrs:{loading:"custom",label:"New Password",rules:t.passwordRules,required:"",counter:"","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},scopedSlots:t._u([{key:"progress",fn:function(){return[t.custom?e(d.Z,{attrs:{value:t.progress,color:t.color,absolute:"",height:"4"}}):t._e()]},proxy:!0}],null,!1,1006911967),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}):t._e()],1)],1),e(i.h7,[t.isValidEmail?e(r.Z,{attrs:{block:"",disabled:!t.valid,color:"primary"},on:{click:t.changePassword}},[t._v("Change Password")]):t._e(),t.isValidEmail?t._e():e(r.Z,{attrs:{block:"",disabled:!t.valid||t.successMsg,color:"primary"},on:{click:t.validatEmail}},[t._v("Validate Email")])],1),t.validateEmailError?e(i.ZB,{staticStyle:{color:"red"}},[t._v(" "+t._s(t.validateEmailError)+" ")]):t._e(),t.successMsg?e(i.ZB,{staticStyle:{color:"green"}},[t._v(" Password has been changed. Please login with new password. You will be redirected to Login page in "+t._s(t.countDown)+" seconds. ")]):t._e(),e(i.ZB,[e("router-link",{attrs:{to:"/"}},[t._v("Go Back to Login")])],1)],1)],1)],1)],1)},f=[],p=s(9669),g=s.n(p),m={data(){return{custom:!0,showPassword:!1,valid:!0,loading:!1,email:"",password:"",emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"],passwordRules:[t=>!!t||"Password is required",t=>t&&t.length>7||"Min 8 characters"],validateEmailError:"",isValidEmail:!1,successMsg:!1,countDown:5}},computed:{progress(){return this.password?Math.min(100,12.5*this.password.length):0},color(){return["error","warning","success"][Math.floor(this.progress/40)]}},methods:{validatEmail(){this.$refs.form.validate()&&g().post("/api/validate_email",{email:this.email}).then(function(t){t.data.ok?this.isValidEmail=!0:(this.validateEmailError=t.data.error,setTimeout((()=>{this.validateEmailError=""}),5e3))}.bind(this)).catch((t=>{console.log("ERROR OCCURED LOGIN")}))},changePassword(){if(this.$refs.form.validate()){const t={email:this.email,password:this.password};g().post("/api/forgot_password",{post_data:t}).then(function(t){t.data.ok&&(this.successMsg=!0,this.countDownTimer(),setTimeout((()=>{this.successMsg=!1,this.$router.push("/")}),5e3),this.$refs.form.reset(),this.isValidEmail=!1)}.bind(this)).catch((t=>{console.log(t),console.log("ERROR OCCURED FORGOT PASSWORD"),this.email="",this.password=""}))}},countDownTimer(){this.countDown>0&&setTimeout((()=>{this.countDown-=1,this.countDownTimer()}),1e3)}}},v=m,w=s(1001),y=(0,w.Z)(v,h,f,!1,null,null,null),b=y.exports},3558:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var r=s(6190),a=s(4145),i=s(4886),o=s(266),n=s(2118),l=s(5125),d=s(9592),c=s(1713),u=s(7808),h=function(){var t=this,e=t._self._c;return e(n.Z,[e(c.Z,[e(o.Z,{attrs:{cols:"12",sm:"12",md:"8",lg:"6",xl:"6","offset-md":"2","offset-lg":"3","offset-xl":"3"}},[e(a.Z,{staticClass:"mt-4 px-4 text-center"},[e("h1",[t._v("Cashflow")]),e(i.ZB,[e(l.Z,{ref:"form",staticClass:"login-form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e(u.Z,{attrs:{label:"Email",type:"email",rules:t.emailRules,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e(u.Z,{attrs:{loading:"custom",label:"Password",rules:t.passwordRules,required:"",counter:"","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},scopedSlots:t._u([{key:"progress",fn:function(){return[t.custom?e(d.Z,{attrs:{value:t.progress,color:t.color,absolute:"",height:"4"}}):t._e()]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),e(i.h7,[e(r.Z,{attrs:{block:"",disabled:!t.valid,color:"primary"},on:{click:t.login}},[t._v("Login")])],1),e(i.ZB,[e("router-link",{attrs:{to:"/forgot-password"}},[t._v("Forgot Password")])],1),t.loginError?e(i.ZB,{staticStyle:{color:"red"}},[t._v(" "+t._s(t.loginError)+" ")]):t._e(),e(i.ZB,[t._v(" Don't have an account?"),e("router-link",{attrs:{to:"/signup"}},[t._v("Create one here")])],1)],1)],1)],1)],1)},f=[],p=s(9669),g=s.n(p),m={data(){return{custom:!0,showPassword:!1,valid:!0,loading:!1,email:"",password:"",emailRules:[t=>!!t||"E-mail is required",t=>/.+@.+\..+/.test(t)||"E-mail must be valid"],passwordRules:[t=>!!t||"Password is required",t=>t&&t.length>7||"Min 8 characters"],loginError:""}},computed:{progress(){return Math.min(100,12.5*this.password.length)},color(){return["error","warning","success"][Math.floor(this.progress/40)]}},methods:{login(){if(this.$refs.form.validate()){const t={email:this.email,password:this.password};console.log(t),g().post("/api/login",{post_data:t}).then(function(t){t.data.ok?(this.$store.dispatch("setLoginSession",t.data.user_data),this.$router.push("/dashboard/companies-list")):this.loginError=t.data.error}.bind(this)).catch((t=>{console.log("ERROR OCCURED LOGIN")}))}}}},v=m,w=s(1001),y=(0,w.Z)(v,h,f,!1,null,null,null),b=y.exports},4245:function(){},1884:function(){},9027:function(){},4145:function(t,e,s){s(4245);var r=s(3434),a=s(9603),i=s(8860),o=s(7678);e["Z"]=(0,o.Z)(a.Z,i.Z,r.Z).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...i.Z.options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...r.Z.options.computed.classes.call(this)}},styles(){const t={...r.Z.options.computed.styles.call(this)};return this.img&&(t.background=`url("${this.img}") center center / cover no-repeat`),t}},methods:{genProgress(){const t=a.Z.options.methods.genProgress.call(this);return t?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[t]):null}},render(t){const{tag:e,data:s}=this.generateRouteLink();return s.style=this.styles,this.isClickable&&(s.attrs=s.attrs||{},s.attrs.tabindex=0),t(e,this.setBackgroundColor(this.color,s),[this.genProgress(),this.$slots.default])}})},4886:function(t,e,s){s.d(e,{EB:function(){return l},Qq:function(){return o},ZB:function(){return n},h7:function(){return i}});var r=s(4145),a=s(5352);const i=(0,a.Ji)("v-card__actions"),o=(0,a.Ji)("v-card__subtitle"),n=(0,a.Ji)("v-card__text"),l=(0,a.Ji)("v-card__title");r.Z},5125:function(t,e,s){s(6699);var r=s(7678),a=s(2500),i=s(4712);e["Z"]=(0,r.Z)(a.Z,(0,i.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(r=>{r&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})},266:function(t,e,s){s(6699),s(1884);var r=s(144),a=s(1767),i=s(5352);const o=["sm","md","lg","xl"],n=(()=>o.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),l=(()=>o.reduce(((t,e)=>(t["offset"+(0,i.jC)(e)]={type:[String,Number],default:null},t)),{}))(),d=(()=>o.reduce(((t,e)=>(t["order"+(0,i.jC)(e)]={type:[String,Number],default:null},t)),{}))(),c={col:Object.keys(n),offset:Object.keys(l),order:Object.keys(d)};function u(t,e,s){let r=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");r+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(r+=`-${s}`,r.toLowerCase()):r.toLowerCase()}}const h=new Map;e["Z"]=r.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...n,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:r,parent:i}){let o="";for(const a in e)o+=String(e[a]);let n=h.get(o);if(!n){let t;for(t in n=[],c)c[t].forEach((s=>{const r=e[s],a=u(t,s,r);a&&n.push(a)}));const s=n.some((t=>t.startsWith("col-")));n.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),h.set(o,n)}return t(e.tag,(0,a.ZP)(s,{class:n}),r)}})},2118:function(t,e,s){s.d(e,{Z:function(){return o}});s(9027),s(1884);var r=s(144);function a(t){return r.ZP.extend({name:`v-${t}`,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(e,{props:s,data:r,children:a}){r.staticClass=`${t} ${r.staticClass||""}`.trim();const{attrs:i}=r;if(i){r.attrs={};const t=Object.keys(i).filter((t=>{if("slot"===t)return!1;const e=i[t];return t.startsWith("data-")?(r.attrs[t]=e,!1):e||"string"===typeof e}));t.length&&(r.staticClass+=` ${t.join(" ")}`)}return s.id&&(r.domProps=r.domProps||{},r.domProps.id=s.id),e(s.tag,r,a)}})}var i=s(1767),o=a("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(t,{props:e,data:s,children:r}){let a;const{attrs:o}=s;return o&&(s.attrs={},a=Object.keys(o).filter((t=>{if("slot"===t)return!1;const e=o[t];return t.startsWith("data-")?(s.attrs[t]=e,!1):e||"string"===typeof e}))),e.id&&(s.domProps=s.domProps||{},s.domProps.id=e.id),t(e.tag,(0,i.ZP)(s,{staticClass:"container",class:Array({"container--fluid":e.fluid}).concat(a||[])}),r)}})},1713:function(t,e,s){s(6699),s(1884);var r=s(144),a=s(1767),i=s(5352);const o=["sm","md","lg","xl"],n=["start","end","center"];function l(t,e){return o.reduce(((s,r)=>(s[t+(0,i.jC)(r)]=e(),s)),{})}const d=t=>[...n,"baseline","stretch"].includes(t),c=l("align",(()=>({type:String,default:null,validator:d}))),u=t=>[...n,"space-between","space-around"].includes(t),h=l("justify",(()=>({type:String,default:null,validator:u}))),f=t=>[...n,"space-between","space-around","stretch"].includes(t),p=l("alignContent",(()=>({type:String,default:null,validator:f}))),g={align:Object.keys(c),justify:Object.keys(h),alignContent:Object.keys(p)},m={align:"align",justify:"justify",alignContent:"align-content"};function v(t,e,s){let r=m[t];if(null!=s){if(e){const s=e.replace(t,"");r+=`-${s}`}return r+=`-${s}`,r.toLowerCase()}}const w=new Map;e["Z"]=r.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...c,justify:{type:String,default:null,validator:u},...h,alignContent:{type:String,default:null,validator:f},...p},render(t,{props:e,data:s,children:r}){let i="";for(const a in e)i+=String(e[a]);let o=w.get(i);if(!o){let t;for(t in o=[],g)g[t].forEach((s=>{const r=e[s],a=v(t,s,r);a&&o.push(a)}));o.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),w.set(i,o)}return t(e.tag,(0,a.ZP)(s,{staticClass:"row",class:o}),r)}})}}]);
//# sourceMappingURL=login.c61dc6a4.js.map